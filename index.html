<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Misión Carismática al Mundo Buga - Una iglesia comprometida con la palabra de Dios y el servicio a la comunidad. Predicaciones, música cristiana, ministerios y eventos.">
    <meta name="keywords" content="iglesia, buga, misión carismática, predicaciones, música cristiana, ministerios, eventos cristianos, cultos, células">
    <meta name="author" content="Misión Carismática al Mundo Buga">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#1a3a7a">

    <!-- Open Graph para redes sociales -->
    <meta property="og:title" content="Misión Carismática al Mundo Buga">
    <meta property="og:description" content="Una iglesia comprometida con la palabra de Dios y el servicio a la comunidad">
    <meta property="og:image" content="https://mcmbuga.online/assets/images/Logo%20MCm.png">
    <meta property="og:url" content="https://mcmbuga.online">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="es_ES">
    <meta property="og:site_name" content="MCM Buga">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Misión Carismática al Mundo Buga">
    <meta name="twitter:description" content="Una iglesia comprometida con la palabra de Dios y el servicio a la comunidad">
    <meta name="twitter:image" content="https://mcmbuga.online/assets/images/Logo%20MCm.png">

    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <title>Misión Carismática al Mundo Buga - Iglesia Cristiana en Buga</title>

    <!-- Critical CSS Inline -->
    <style>
        :root{--primary:#1a3a7a;--primary-dark:#0d1d3a;--secondary:#d4af37;--light:#f8f9fa;--white:#ffffff;--dark:#2c3e50;--text-color:#2c3e50;--spacing-sm:0.75rem;--spacing-md:1rem;--spacing-lg:1.5rem;--header-height:80px;--transition:all 0.3s ease}*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Poppins',Arial,sans-serif;line-height:1.6;color:var(--text-color);background-color:var(--light);overflow-x:hidden}.header{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%);color:white;padding:var(--spacing-md) 0;position:sticky;top:0;z-index:1000}.container{max-width:1200px;margin:0 auto;padding:0 var(--spacing-md)}.navbar{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:1rem;height:var(--header-height);padding:0 var(--spacing-sm)}.loading-hidden{opacity:0!important;visibility:hidden!important;transition:opacity .5s ease,visibility 0s .5s!important}.hero{min-height:60vh;background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%);color:white;display:flex;align-items: center;position:relative}
    </style>

    <link rel="preload" href="assets/css/variables.css" as="style">
    <link rel="preload" href="assets/css/layout.css" as="style">
    <link rel="preload" href="assets/js/utils.js" as="script">
    <link rel="preload" href="assets/js/interactivity.js" as="script">
    
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@700;800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@700;800&display=swap"></noscript>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" media="print" onload="this.media='all'">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@700;800&display=swap" rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@700;800&display=swap" rel="stylesheet"></noscript>

    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/css/variables.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/interactive.css">
    <link rel="stylesheet" href="assets/css/navbar-fix.css">
    <link rel="stylesheet" href="assets/css/mobile-fixes.css">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/images/Logo%20MCm.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Church",
        "name": "Misión Carismática al Mundo Buga",
        "description": "Una iglesia comprometida con la palabra de Dios y el servicio a la comunidad",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Carrera 8 # 13-35",
            "addressLocality": "Buga",
            "addressRegion": "Valle del Cauca",
            "addressCountry": "CO"
        },
        "telephone": "+57 315 3599017",
        "email": "mcmbuga@gmail.com",
        "url": "https://mcmbuga.com",
        "sameAs": [
            "https://www.facebook.com/Iglesiamisioncarismaticaalmundobuga"
        ]
    }
    </script>

</head>
<body>
    <!-- Loading Indicator -->
    <div id="loading-indicator" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1a3a7a 0%, #0d1d3a 100%); z-index: 9999; display: flex; justify-content: center; align-items: center; flex-direction: column; color: white; font-family: 'Poppins', sans-serif; opacity: 1; visibility: visible;">
        <div style="width: 50px; height: 50px; border: 3px solid rgba(255,255,255,0.3); border-top: 3px solid #d4af37; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px;"></div>
        <p style="font-size: 1.2rem; margin: 0;">Cargando MCM Buga...</p>
        <p id="loading-status" style="font-size: 0.9rem; margin: 10px 0 0 0; opacity: 0.8;">Preparando contenido...</p>
        <style>
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .loading-hidden {
                opacity: 0 !important;
                visibility: hidden !important;
                transition: opacity 0.8s ease, visibility 0.8s ease !important;
                pointer-events: none;
            }
        </style>
    </div>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="sr-only">Saltar al contenido principal</a>

    <!-- Facebook SDK -->
    <div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function() {
            FB.init({
                xfbml: true,
                version: 'v19.0'
            });
        };
        
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "https://connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v19.0";
            js.onerror = function() {
                console.warn('Facebook SDK failed to load');
            };
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>

    <!-- Header -->
    <header class="header" role="banner">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="Navegación principal">
                <div class="navbar-brand">
                    <picture>
                        <source srcset="assets/images/Logo%20MCm.avif" type="image/avif">
                        <source srcset="assets/images/Logo%20MCm.webp" type="image/webp">
                        <img src="assets/images/Logo%20MCm.png" 
                             alt="Logo Misión Carismática al Mundo Buga" 
                             class="logo-img" 
                             loading="eager"
                             width="50"
                             height="50"
                             onerror="this.onerror=null;this.src='https://placehold.co/50x50/1a3a7a/ffffff?text=MCM';">
                    </picture>
                    <div class="brand-text">
                        <span>MCM</span>
                        <span>Buga</span>
                    </div>
                </div>
                <button class="mobile-toggle" aria-label="Abrir menú de navegación" aria-expanded="false">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                </button>
                <ul class="nav-menu" role="menubar">
                    <li role="none"><a href="#hero" role="menuitem">Inicio</a></li>
                    <li role="none"><a href="#about" role="menuitem">Nosotros</a></li>
                    <li role="none"><a href="predicas.html" role="menuitem">Mensajes</a></li>
                    <li role="none"><a href="#music" role="menuitem">Música</a></li>
                    <li role="none"><a href="#live-streaming" role="menuitem">En Vivo</a></li>
                    <li role="none"><a href="#blog" role="menuitem">Noticias</a></li>
                    <li role="none"><a href="#ministries" role="menuitem">Ministerios</a></li>
                    <li role="none"><a href="#events" role="menuitem">Eventos</a></li>
                    <li role="none"><a href="#gallery" role="menuitem">Galería</a></li>
                    <li role="none"><a href="#contact" role="menuitem">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" role="main">
        <!-- Hero Section -->
        <section class="hero" id="hero" aria-labelledby="hero-title">
            <div class="container hero-content animate-fade">
                <h1 id="hero-title" class="hero-title">
                    Bienvenidos a
                    <span class="highlight">Misión Carismática al Mundo</span>
                    Buga
                </h1>
                <p class="hero-subtitle animate-fade animate-delay-1">
                    Una iglesia comprometida con la palabra de Dios y el servicio a la comunidad
                </p>
                <div class="hero-cta animate-fade animate-delay-2">
                    <a href="#about" class="btn btn-primary" role="button">
                        <i class="fas fa-heart" aria-hidden="true"></i>
                        Conoce Más
                    </a>
                    <a href="#messages" class="btn btn-outline" role="button">
                        <i class="fas fa-headphones" aria-hidden="true"></i>
                        Escucha Mensajes
                    </a>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="section about" id="about" aria-labelledby="about-title">
            <div class="container">
                <div class="about-content">
                    <div class="about-text reveal">
                        <h2 id="about-title" class="section-title-alt">Nuestra Pastora</h2>
                        <div class="about-description">
                            <p>En Misión Carismática al Mundo Buga, nuestra pastora es una líder comprometida con llevar el mensaje de esperanza y salvación a cada hogar, transformando vidas a través del amor de Jesucristo.</p>
                            
                            <p>Nos dedicamos a la formación espiritual, al discipulado y la creación de un ambiente donde cada persona pueda crecer en su relación con Dios y con los demás. ¡Te invitamos a ser parte de nuestra familia!</p>
                            
                            <div class="pastor-info">
                                <h3>Pastora Mary Penagos</h3>
                                <p class="pastor-title">Líder Espiritual y Fundadora</p>
                                <p class="pastor-description">Con años de experiencia en el ministerio, la Pastora Mary ha dedicado su vida a servir a Dios y a la comunidad, guiando con sabiduría y amor pastoral.</p>
                            </div>
                        </div>
                        
                        <div class="about-cta">
                            <a href="#ministries" class="btn btn-secondary">
                                <i class="fas fa-hands-helping" aria-hidden="true"></i>
                                Ver Ministerios
                            </a>
                            <a href="#contact" class="btn btn-outline">
                                <i class="fas fa-phone" aria-hidden="true"></i>
                                Contactar
                            </a>
                        </div>
                    </div>
                    
                    <div class="about-image reveal animate-delay-1">
                        <div class="pastor-image-container">
                            <picture>
                                <source srcset="assets/images/Pastora.avif" type="image/avif">
                                <source srcset="assets/images/Pastora.webp" type="image/webp">
                                <img src="assets/images/Pastora.jpg" 
                                     alt="Pastora Mary Penagos - Líder Espiritual de MCM Buga" 
                                     class="pastor-image"
                                     width="400"
                                     height="400"
                                     loading="lazy"
                                     decoding="async">
                            </picture>
                            <div class="image-decorations">
                                <div class="decoration decoration-1"></div>
                                <div class="decoration decoration-2"></div>
                                <div class="decoration decoration-3"></div>
                            </div>
                            <div class="image-overlay">
                                <span class="overlay-text">Misión Carismática al Mundo Buga</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Messages Section -->
        <section class="section messages" id="messages" aria-labelledby="messages-title">
            <div class="container text-center">
                <h2 id="messages-title" class="section-title reveal">Mensajes que Edifican</h2>
                <p class="section-subtitle reveal">Explora nuestro archivo de prédicas, estudios bíblicos y devocionales diseñados para fortalecer tu fe.</p>
                <div class="message-preview-grid reveal">
                    <div class="preview-card">
                        <i class="fas fa-water card-icon"></i>
                        <h3 class="preview-title">Jesús, Nuestra Paz en Medio de la Tormenta</h3>
                        <p>Descubre cómo la fe nos da una paz inquebrantable que no depende de las circunstancias externas. La verdadera paz se encuentra en la presencia de Cristo, no en la ausencia de problemas.</p>
                    </div>
                    <div class="preview-card">
                        <i class="fas fa-book-open card-icon"></i>
                        <h3 class="preview-title">No Basta con Oír la Palabra; Hay que Obedecerla</h3>
                        <p>Un mensaje contundente sobre Romanos 2:13-17 que nos llama a ser "hacedores de la Palabra y no tan solamente oidores". La obediencia genuina transforma vidas.</p>
                    </div>
                    <div class="preview-card">
                        <i class="fas fa-cross card-icon"></i>
                        <h3 class="preview-title">La Lucha entre la Carne y el Espíritu</h3>
                        <p>Aprende a ganar la batalla interna entre las inclinaciones pecaminosas y la guía divina del Espíritu Santo. La victoria se encuentra en someter el alma a la voluntad de Dios.</p>
                    </div>
                </div>
                <a href="predicas.html" class="btn btn-primary btn-large mt-4 reveal">
                    <i class="fas fa-arrow-right" aria-hidden="true"></i>
                    Ver todas las prédicas
                </a>
            </div>
        </section>

        <!-- Music Section -->
        <section class="section music" id="music" aria-labelledby="music-title">
            <div class="container">
                <h2 id="music-title" class="section-title reveal">Música de Alabanza</h2>
                <p class="section-subtitle reveal">Disfruta de la música que nos inspira y nos conecta con Dios.</p>
                <div class="card audio-card-large reveal">
                    <div class="card-header">
                        <i class="fas fa-music card-icon" aria-hidden="true"></i>
                        <h3 class="card-title">Aroma a Rey - Alex Osorio</h3>
                    </div>
                    <div class="card-body">
                        <p>Una alabanza que exalta la majestad y el señorío de nuestro Dios. Déjate ministrar por esta hermosa canción.</p>
                        <audio controls class="audio-player" preload="metadata" crossorigin="anonymous">
                            <source src="assets/audio/Alex Osorio Salmista - Aroma a Rey.mp3" type="audio/mpeg">
                            Tu navegador no soporta el elemento de audio.
                        </audio>
                        <a href="assets/audio/Alex Osorio Salmista - Aroma a Rey.mp3" download="Aroma_a_Rey_Alex_Osorio.mp3" class="btn btn-primary">
                            <i class="fas fa-download" aria-hidden="true"></i> Descargar Alabanza
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Live Streaming Section -->
        <section class="section live-streaming" id="live-streaming" aria-labelledby="streaming-title">
            <div class="container">
                <h2 id="streaming-title" class="section-title reveal">Transmisiones en Vivo</h2>
                <p class="section-subtitle reveal">Únete a nuestros cultos y eventos en tiempo real desde cualquier lugar.</p>
                
                <div class="streaming-container">
                    <!-- Estado de transmisión en vivo -->
                    <div class="live-status" id="liveStatus">
                        <div class="status-indicator offline" id="statusIndicator">
                            <i class="fas fa-circle"></i>
                            <span id="statusText">Transmisión no activa</span>
                        </div>
                        <div class="next-stream" id="nextStream">
                            <i class="fas fa-clock"></i>
                            <span>Próxima transmisión: <strong>Viernes 7:30 PM</strong></span>
                        </div>
                    </div>
                    
                    <!-- Reproductor principal -->
                    <div class="stream-player" id="streamPlayer">
                        <div class="fb-video" 
                             data-href="https://www.facebook.com/Iglesiamisioncarismaticaalmundobuga/videos/"
                             data-width="800"
                             data-allowfullscreen="true"
                             data-autoplay="false"
                             data-show-text="false">
                        </div>
                        
                        <!-- Placeholder cuando no hay transmisión -->
                        <div class="stream-placeholder" id="streamPlaceholder">
                            <div class="placeholder-content">
                                <i class="fas fa-video-slash"></i>
                                <h3>No hay transmisión activa</h3>
                                <p>Mientras tanto, puedes ver nuestras transmisiones anteriores o escuchar nuestros mensajes.</p>
                                <button class="btn btn-primary" onclick="showPreviousStreams()">
                                    <i class="fas fa-history"></i>
                                    Ver transmisiones anteriores
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Historial de transmisiones -->
                    <div class="stream-history" id="streamHistory">
                        <h3>Transmisiones Anteriores</h3>
                        <div class="history-grid" id="historyGrid">
                            <!-- Videos de Facebook embebidos -->
                            <div class="history-item">
                                <div class="fb-video" 
                                     data-href="https://www.facebook.com/Iglesiamisioncarismaticaalmundobuga/videos/" 
                                     data-width="300" 
                                     data-show-text="false"
                                     data-allowfullscreen="true">
                                </div>
                                <h4>Culto en Vivo - Últimas Transmisiones</h4>
                                <p>Revive nuestros momentos de adoración y la Palabra de Dios</p>
                            </div>
                            
                            <div class="history-item">
                                <iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FIglesiamisioncarismaticaalmundobuga&tabs=timeline&width=300&height=300&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=true&appId" 
                                        width="300" 
                                        height="300" 
                                        style="border:none;overflow:hidden" 
                                        scrolling="no" 
                                        frameborder="0" 
                                        allowfullscreen="true" 
                                        allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share">
                                </iframe>
                                <h4>Página Principal</h4>
                                <p>Síguenos para estar al día con todas nuestras actividades</p>
                            </div>
                        </div>
                        
                        <div class="history-controls">
                            <button class="btn btn-secondary" onclick="loadMoreFacebookContent()">
                                <i class="fas fa-sync-alt"></i>
                                Actualizar contenido
                            </button>
                            <a href="https://www.facebook.com/Iglesiamisioncarismaticaalmundobuga/videos" 
                               target="_blank" 
                               rel="noopener noreferrer" 
                               class="btn btn-outline">
                                <i class="fas fa-external-link-alt"></i>
                                Ver todas en Facebook
                            </a>
                        </div>
                    </div>
                    
                    <!-- Información adicional -->
                    <div class="streaming-info">
                        <div class="info-card">
                            <i class="fas fa-calendar-alt"></i>
                            <div>
                                <h4>Horarios de Transmisión</h4>
                                <ul>
                                    <li>Cultos Viernes: 7:30 PM</li>
                                    <li>Cultos Domingos: 9:00 AM</li>
                                    <li>Eventos especiales según programación</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <i class="fas fa-bell"></i>
                            <div>
                                <h4>Notificaciones</h4>
                                <p>Síguenos en Facebook para recibir notificaciones cuando iniciemos transmisiones en vivo.</p>
                                <a href="https://www.facebook.com/Iglesiamisioncarismaticaalmundobuga" 
                                   target="_blank" 
                                   rel="noopener noreferrer" 
                                   class="btn btn-primary btn-sm">
                                    <i class="fab fa-facebook-f"></i>
                                    Seguir en Facebook
                                </a>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <i class="fas fa-share-alt"></i>
                            <div>
                                <h4>Compartir</h4>
                                <p>Invita a otros a unirse a nuestras transmisiones en vivo.</p>
                                <div class="share-buttons">
                                    <button class="share-btn" onclick="shareStream('whatsapp')">
                                        <i class="fab fa-whatsapp"></i>
                                    </button>
                                    <button class="share-btn" onclick="shareStream('facebook')">
                                        <i class="fab fa-facebook-f"></i>
                                    </button>
                                    <button class="share-btn" onclick="shareStream('copy')">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="section contact" id="contact" aria-labelledby="contact-title">
            <div class="container">
                <h2 id="contact-title" class="section-title reveal">Contáctanos</h2>
                <p class="section-subtitle reveal">Estamos aquí para servirte. Ponte en contacto con nosotros.</p>

                <div class="contact-content">
                    <div class="contact-info reveal">
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                            </div>
                            <div class="contact-details">
                                <h3>Ubicación</h3>
                                <p>Carrera 8 # 13-35, Buga</p>
                                <p>Valle del Cauca, Colombia</p>
                            </div>
                        </div>

                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-phone" aria-hidden="true"></i>
                            </div>
                            <div class="contact-details">
                                <h3>Teléfono</h3>
                                <p><a href="tel:+573153599017">+57 315 3599017</a></p>
                            </div>
                        </div>

                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-envelope" aria-hidden="true"></i>
                            </div>
                            <div class="contact-details">
                                <h3>Email</h3>
                                <p><a href="mailto:mcmbuga@gmail.com">mcmbuga@gmail.com</a></p>
                            </div>
                        </div>
                    </div>

                    <div class="contact-form reveal animate-delay-1">
                        <form aria-labelledby="contact-form-title" novalidate>
                            <h3 id="contact-form-title" class="card-title">Envíanos un Mensaje</h3>

                            <div class="form-group">
                                <input type="text" id="name" name="name" required aria-describedby="name-error" placeholder=" " class="form-control">
                                <label for="name" class="form-label">Nombre completo *</label>
                                <div id="name-error" class="error-message" role="alert" aria-live="polite"></div>
                            </div>

                            <div class="form-group">
                                <input type="email" id="email" name="email" required aria-describedby="email-error" placeholder=" " class="form-control">
                                <label for="email" class="form-label">Correo electrónico *</label>
                                <div id="email-error" class="error-message" role="alert" aria-live="polite"></div>
                            </div>

                            <div class="form-group">
                                <input type="text" id="subject" name="subject" placeholder=" " class="form-control">
                                <label for="subject" class="form-label">Asunto</label>
                            </div>

                            <div class="form-group">
                                <textarea id="message" name="message" required aria-describedby="message-error" rows="5" placeholder=" " class="form-control" minlength="10"></textarea>
                                <label for="message" class="form-label">Mensaje *</label>
                                <div id="message-error" class="error-message" role="alert" aria-live="polite"></div>
                            </div>

                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-paper-plane" aria-hidden="true"></i>
                                Enviar Mensaje
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container footer-content">
            <div class="footer-col">
                <h3>Misión Carismática al Mundo Buga</h3>
                <p>Una iglesia comprometida con la palabra de Dios y el servicio a la comunidad.</p>
                <div class="social-links" aria-label="Enlaces a redes sociales">
                    <a href="https://www.facebook.com/Iglesiamisioncarismaticaalmundobuga" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Visitar nuestra página de Facebook">
                        <i class="fab fa-facebook-f" aria-hidden="true"></i>
                    </a>
                </div>
            </div>

            <div class="footer-col">
                <h3>Enlaces Rápidos</h3>
                <ul>
                    <li><a href="#about">Nosotros</a></li>
                    <li><a href="#messages">Mensajes</a></li>
                    <li><a href="#contact">Contacto</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Contacto</h3>
                <p><i class="fas fa-map-marker-alt" aria-hidden="true"></i> Carrera 8 # 13-35, Buga</p>
                <p><i class="fas fa-phone" aria-hidden="true"></i> <a href="tel:+573153599017">+57 315 3599017</a></p>
                <p><i class="fas fa-envelope" aria-hidden="true"></i> <a href="mailto:mcmbuga@gmail.com">mcmbuga@gmail.com</a></p>
            </div>

            <div class="footer-col">
                <h3>Horarios</h3>
                <p><strong>Cultos:</strong> Viernes 7:30 PM  y Domingos 9:00 AM</p>
                <p><strong>Células:</strong> Miércoles 7:30 PM</p>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 Misión Carismática al Mundo Buga. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Theme Toggle Button -->
    <button id="theme-toggle" class="theme-toggle" aria-label="Cambiar a tema oscuro">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Scripts -->
    <script src="error-handler.js"></script>
    <script src="assets/js/performance.js" async></script>
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/interactivity.js"></script>
    
    <!-- Test Suite (Solo en desarrollo) -->
    <script>
        // Solo cargar tests en desarrollo
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            const testScripts = ['./test-suite.js', './test-specific.js', './diagnostico-imagenes.js'];
            testScripts.forEach(src => {
                const script = document.createElement('script');
                script.src = src;
                script.onerror = () => console.log('Test script not found:', src);
                document.head.appendChild(script);
            });
        }
        
        // Cargar diagnóstico de audio en producción para debugging
        if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
            const audioScript = document.createElement('script');
            audioScript.src = './audio-diagnostic.js';
            audioScript.onerror = () => console.log('Audio diagnostic not found');
            document.head.appendChild(audioScript);
        }
    </script>

    <!-- Main App Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ocultar loading indicator
            setTimeout(() => {
                const loadingIndicator = document.getElementById('loading-indicator');
                if (loadingIndicator) {
                    loadingIndicator.classList.add('loading-hidden');
                }
            }, 1000);

            // Mobile menu toggle
            const mobileToggle = document.querySelector('.mobile-toggle');
            const navMenu = document.querySelector('.nav-menu');
            if (mobileToggle && navMenu) {
                mobileToggle.addEventListener('click', () => {
                    const isActive = navMenu.classList.toggle('active');
                    mobileToggle.setAttribute('aria-expanded', isActive);
                    mobileToggle.innerHTML = isActive ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
                });
            }

            // Header scroll effect
            const header = document.querySelector('.header');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });

            // Smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Theme toggle
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-theme');
                const isDark = document.body.classList.contains('dark-theme');
                themeToggle.setAttribute('aria-label', isDark ? 'Cambiar a tema claro' : 'Cambiar a tema oscuro');
                themeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            });

            // Initialize theme toggle
            if (typeof setupThemeToggle === 'function') {
                setupThemeToggle();
            }

            // Toggle details functionality
            document.querySelectorAll('.toggle-details').forEach((button, index) => {
                const detailsElement = button.closest('.card-body, .culto-item').querySelector('.details');
                if (detailsElement && !detailsElement.id) {
                    detailsElement.id = `details-${index + 1}`;
                    button.setAttribute('aria-controls', detailsElement.id);
                }
                
                button.setAttribute('aria-expanded', 'false');
                if (detailsElement) {
                    detailsElement.setAttribute('aria-hidden', 'true');
                }
                
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggleDetails(button);
                });
                
                button.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleDetails(button);
                    }
                });
            });

            function toggleDetails(button) {
                const cardBody = button.closest('.card-body') || button.closest('.culto-item');
                if (cardBody) {
                    const details = cardBody.querySelector('.details');
                    if (details) {
                        const isVisible = details.style.display === 'block';
                        
                        if (isVisible) {
                            details.style.display = 'none';
                            details.classList.remove('visible');
                            updateButtonText(button, false);
                        } else {
                            details.style.display = 'block';
                            setTimeout(() => details.classList.add('visible'), 10);
                            updateButtonText(button, true);
                        }
                        
                        // Accesibilidad
                        button.setAttribute('aria-expanded', !isVisible);
                        details.setAttribute('aria-hidden', isVisible);
                    }
                }
            }

            function updateButtonText(button, isExpanded) {
                const originalText = button.textContent;
                if (originalText.includes('Leer mensaje completo') || originalText.includes('Ver más')) {
                    button.textContent = isExpanded ? 
                        originalText.replace('Leer mensaje completo', 'Ocultar mensaje completo')
                                  .replace('Ver más', 'Ver menos') :
                        originalText.replace('Ocultar mensaje completo', 'Leer mensaje completo')
                                  .replace('Ver menos', 'Ver más');
                }
            }
        });

        // Registrar Service Worker para PWA
        if ('serviceWorker' in navigator && window.location.protocol !== 'file:') {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js', {
                    scope: './'
                }).then((registration) => {
                    console.log('Service Worker registrado exitosamente:', registration.scope);
                    
                    // Manejar actualizaciones del SW
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                showUpdateNotification();
                            }
                        });
                    });
                }).catch((error) => {
                    console.error('Error al registrar Service Worker:', error);
                });
            });
        }

        // Función para mostrar notificación de actualización
        function showUpdateNotification() {
            const notification = document.createElement('div');
            notification.innerHTML = `
                <div style="position: fixed; top: 20px; right: 20px; background: var(--primary); color: white; padding: 1rem; border-radius: 8px; box-shadow: var(--shadow-lg); z-index: 9999; max-width: 300px;">
                    <p style="margin: 0 0 0.5rem 0; font-weight: 600;">Nueva versión disponible</p>
                    <p style="margin: 0 0 1rem 0; font-size: 0.9rem;">Se ha descargado una nueva versión de la aplicación.</p>
                    <button onclick="updateApp()" style="background: var(--secondary); color: var(--dark); border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; margin-right: 0.5rem;">Actualizar</button>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: transparent; color: white; border: 1px solid white; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">Después</button>
                </div>
            `;
            document.body.appendChild(notification);
        }

        // Función para actualizar la aplicación
        function updateApp() {
            if (navigator.serviceWorker.controller) {
                navigator.serviceWorker.controller.postMessage({ type: 'SKIP_WAITING' });
                window.location.reload();
            }
        }

        // Función para mostrar transmisiones anteriores
        function showPreviousStreams() {
            const streamHistory = document.getElementById('streamHistory');
            if (streamHistory) {
                streamHistory.scrollIntoView({ behavior: 'smooth' });
                streamHistory.style.display = 'block';
                
                // Recargar plugins de Facebook
                if (typeof FB !== 'undefined') {
                    FB.XFBML.parse();
                }
            }
        }

        // Función para cargar más contenido de Facebook
        function loadMoreFacebookContent() {
            if (typeof FB !== 'undefined') {
                FB.XFBML.parse();
                
                // Mostrar mensaje de actualización
                const button = event.target.closest('button');
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Actualizando...';
                button.disabled = true;
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.disabled = false;
                }, 2000);
            }
        }

        // Función para compartir transmisión
        function shareStream(platform) {
            const url = 'https://mcmbuga.online';
            const text = 'Únete a nuestras transmisiones en vivo - Misión Carismática al Mundo Buga';
            
            switch(platform) {
                case 'whatsapp':
                    window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(text + ' ' + url)}`, '_blank');
                    break;
                case 'facebook':
                    window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
                    break;
                case 'copy':
                    navigator.clipboard.writeText(url).then(() => {
                        alert('Enlace copiado al portapapeles');
                    });
                    break;
            }
        }

        // Inicializar InteractivityManager
        if (typeof InteractivityManager !== 'undefined') {
            const interactivity = new InteractivityManager();
        }
    </script>
</body>
</html>